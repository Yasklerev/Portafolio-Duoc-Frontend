<h4>Administrar comedor</h4>

<mat-horizontal-stepper labelPosition="bottom" #stepper>
  <mat-step [stepControl]="form">
    <form [formGroup]="form" autocomplete="off">
      <ng-template matStepLabel>Fecha de inicio minuta</ng-template>
      <mat-label>Fecha inicio minuta</mat-label>
      <br />
      <mat-form-field appearance="outline">
        <input
          [class.form-control-danger]="fechaNacNoValido"
          autocomplete="off"
          formControlName="fecha_nacimiento"
          class="form-control"
          type="text"
          placeholder="Seleccionar fecha"
          matInput
          [matDatepicker]="dp3"
          disabled
        />
        <mat-datepicker-toggle matSuffix [for]="dp3"></mat-datepicker-toggle>
        <mat-datepicker #dp3 disabled="false"></mat-datepicker>
      </mat-form-field>
      <div>
        <button
          *ngIf="form.value.fecha_nacimiento"
          mat-raised-button
          color="primary"
          matStepperNext
          (click)="createBill()"
        >
          Siguiente
        </button>
        <button
          *ngIf="!form.value.fecha_nacimiento"
          mat-raised-button
          color="primary"
          matStepperNext
          disabled
        >
          Siguiente
        </button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="form" class="card">
    <form [formGroup]="form">
      <ng-template matStepLabel>Menús minuta</ng-template>
      <mat-card>
        <mat-card-title>
          {{ despachos[0].fecha.substring(0, 11) }}
        </mat-card-title>
        <mat-card-content>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Ingresar plato</mat-label>
            <input
              autocomplete="off"
              formControlName="plato1"
              matInput
              placeholder="Placeholder"
            />
          </mat-form-field>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Ingresar precio</mat-label>
            <input
              autocomplete="off"
              formControlName="precio1"
              matInput
              placeholder="Placeholder"
            />
          </mat-form-field>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Tipo de plato</mat-label>
            <mat-select formControlName="tipo_plato1">
              <mat-option *ngFor="let item of tipoPlatos" [value]="item.id">
                {{ item.nombre }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-card-content>
      </mat-card>
      <mat-card>
        <mat-card-title>
          {{ despachos[1].fecha.substring(0, 11) }}
        </mat-card-title>
        <mat-card-content>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Ingresar plato</mat-label>
            <input
              autocomplete="off"
              formControlName="plato2"
              matInput
              placeholder="Placeholder"
            />
          </mat-form-field>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Ingresar precio</mat-label>
            <input
              autocomplete="off"
              formControlName="precio2"
              matInput
              placeholder="Placeholder"
            />
          </mat-form-field>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Tipo de plato</mat-label>
            <mat-select formControlName="tipo_plato2">
              <mat-option *ngFor="let item of tipoPlatos" [value]="item.id">
                {{ item.nombre }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-card-content>
      </mat-card>
      <mat-card>
        <mat-card-title>
          {{ despachos[2].fecha.substring(0, 11) }}
        </mat-card-title>
        <mat-card-content>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Ingresar plato</mat-label>
            <input
              autocomplete="off"
              formControlName="plato3"
              matInput
              placeholder="Placeholder"
            />
          </mat-form-field>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Ingresar precio</mat-label>
            <input
              autocomplete="off"
              formControlName="precio3"
              matInput
              placeholder="Placeholder"
            />
          </mat-form-field>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Tipo de plato</mat-label>
            <mat-select formControlName="tipo_plato3">
              <mat-option *ngFor="let item of tipoPlatos" [value]="item.id">
                {{ item.nombre }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-card-content>
      </mat-card>
      <mat-card>
        <mat-card-title>
          {{ despachos[3].fecha.substring(0, 11) }}
        </mat-card-title>
        <mat-card-content>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Ingresar plato</mat-label>
            <input
              autocomplete="off"
              formControlName="plato4"
              matInput
              placeholder="Placeholder"
            />
          </mat-form-field>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Ingresar precio</mat-label>
            <input
              autocomplete="off"
              formControlName="precio4"
              matInput
              placeholder="Placeholder"
            />
          </mat-form-field>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Tipo de plato</mat-label>
            <mat-select formControlName="tipo_plato4">
              <mat-option *ngFor="let item of tipoPlatos" [value]="item.id">
                {{ item.nombre }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-card-content>
      </mat-card>
      <mat-card>
        <mat-card-title>
          {{ despachos[4].fecha.substring(0, 11) }}
        </mat-card-title>
        <mat-card-content>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Ingresar plato</mat-label>
            <input
              autocomplete="off"
              formControlName="plato5"
              matInput
              placeholder="Placeholder"
            />
          </mat-form-field>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Ingresar precio</mat-label>
            <input
              autocomplete="off"
              formControlName="precio5"
              matInput
              placeholder="Placeholder"
            />
          </mat-form-field>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Tipo de plato</mat-label>
            <mat-select formControlName="tipo_plato5">
              <mat-option *ngFor="let item of tipoPlatos" [value]="item.id">
                {{ item.nombre }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-card-content>
      </mat-card>
      <mat-card class="card1">
        <mat-card-title>
          {{ despachos[5].fecha.substring(0, 11) }}
        </mat-card-title>
        <mat-card-content>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Ingresar plato</mat-label>
            <input
              autocomplete="off"
              formControlName="plato6"
              matInput
              placeholder="Placeholder"
            />
          </mat-form-field>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Ingresar precio</mat-label>
            <input
              autocomplete="off"
              formControlName="precio6"
              matInput
              placeholder="Placeholder"
            />
          </mat-form-field>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Tipo de plato</mat-label>
            <mat-select formControlName="tipo_plato6">
              <mat-option *ngFor="let item of tipoPlatos" [value]="item.id">
                {{ item.nombre }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-card-content>
      </mat-card>
      <mat-card>
        <mat-card-title>
          {{ despachos[6].fecha.substring(0, 11) }}
        </mat-card-title>
        <mat-card-content>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Ingresar plato</mat-label>
            <input
              autocomplete="off"
              formControlName="plato7"
              matInput
              placeholder="Placeholder"
            />
          </mat-form-field>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Ingresar precio</mat-label>
            <input
              autocomplete="off"
              formControlName="precio7"
              matInput
              placeholder="Placeholder"
            />
          </mat-form-field>

          <mat-form-field class="input-none" appearance="outline">
            <mat-label>Ingresar plato</mat-label>
            <input autocomplete="off" matInput placeholder="Placeholder" />
          </mat-form-field>
          <mat-form-field class="input-none" appearance="outline">
            <mat-label>Ingresar precio</mat-label>
            <input autocomplete="off" matInput placeholder="Placeholder" />
          </mat-form-field>
          <mat-form-field class="input" appearance="outline">
            <mat-label>Tipo de plato</mat-label>
            <mat-select formControlName="tipo_plato7">
              <mat-option *ngFor="let item of tipoPlatos" [value]="item.id">
                {{ item.nombre }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-card-content>
      </mat-card>
      <br /><br /><br /><br /><br /><br /><br /><br /><br />
      <div class="next">
        <button mat-raised-button color="primary" matStepperPrevious>
          Volver
        </button>
        <button
          class="siguiente"
          mat-raised-button
          color="primary"
          matStepperNext
          (click)="data()"
        >
          Siguiente
        </button>
      </div>
    </form>
  </mat-step>
  <mat-step>
    <ng-template matStepLabel>Confirmar</ng-template>
    <p>
      Resumen minuta inicia en
      <b class="b"> {{ despachos[0].fecha.substring(0, 11) }}</b> termina en
      <b class="b"> {{ despachos[6].fecha.substring(0, 11) }} </b>
    </p>

    <div>
      <form *ngIf="despachos" class="form-horizontal form-bold">
        <div class="col-xs-12">
          <div class="right">
            <div class="row">
              <div class="col-12">
                <div class="card">
                  <div class="card-body table-size">
                    <h4>Vista previa de los datos.</h4>
                    <table class="table">
                      <thead>
                        <tr>
                          <th>Día</th>
                          <th>Plato</th>
                          <th>Precio</th>
                          <th>Tipo plato</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            {{ dataMenu[0].fecha.fecha.substring(8, 11) }}
                          </td>
                          <td>{{ dataMenu[0].plato1 }}</td>
                          <td>{{ dataMenu[0].precio1 }}</td>
                          <td *ngIf="dataMenu[0].tipo_plato1 === 1">
                            Ejecutivo
                          </td>
                          <td *ngIf="dataMenu[0].tipo_plato1 === 2">
                            Especial
                          </td>
                          <td *ngIf="dataMenu[0].tipo_plato1 === 3">General</td>
                        </tr>
                        <tr>
                          <td>
                            {{ dataMenu[1].fecha.fecha.substring(8, 11) }}
                          </td>
                          <td>{{ dataMenu[1].plato2 }}</td>
                          <td>{{ dataMenu[1].precio2 }}</td>
                          <td *ngIf="dataMenu[1].tipo_plato2 === 1">
                            Ejecutivo
                          </td>
                          <td *ngIf="dataMenu[1].tipo_plato2 === 2">
                            Especial
                          </td>
                          <td *ngIf="dataMenu[1].tipo_plato2 === 3">General</td>
                        </tr>
                        <tr>
                          <td>
                            {{ dataMenu[2].fecha.fecha.substring(8, 11) }}
                          </td>
                          <td>{{ dataMenu[2].plato3 }}</td>
                          <td>{{ dataMenu[2].precio3 }}</td>
                          <td *ngIf="dataMenu[2].tipo_plato3 === 1">
                            Ejecutivo
                          </td>
                          <td *ngIf="dataMenu[2].tipo_plato3 === 2">
                            Especial
                          </td>
                          <td *ngIf="dataMenu[2].tipo_plato3 === 3">General</td>
                        </tr>
                        <tr>
                          <td>
                            {{ dataMenu[3].fecha.fecha.substring(8, 11) }}
                          </td>
                          <td>{{ dataMenu[3].plato4 }}</td>
                          <td>{{ dataMenu[3].precio4 }}</td>
                          <td *ngIf="dataMenu[3].tipo_plato4 === 1">
                            Ejecutivo
                          </td>
                          <td *ngIf="dataMenu[3].tipo_plato4 === 2">
                            Especial
                          </td>
                          <td *ngIf="dataMenu[3].tipo_plato4 === 3">General</td>
                        </tr>
                        <tr>
                          <td>
                            {{ dataMenu[4].fecha.fecha.substring(8, 11) }}
                          </td>
                          <td>{{ dataMenu[4].plato5 }}</td>
                          <td>{{ dataMenu[4].precio5 }}</td>
                          <td *ngIf="dataMenu[4].tipo_plato5 === 1">
                            Ejecutivo
                          </td>
                          <td *ngIf="dataMenu[4].tipo_plato5 === 2">
                            Especial
                          </td>
                          <td *ngIf="dataMenu[4].tipo_plato5 === 3">General</td>
                        </tr>
                        <tr>
                          <td>
                            {{ dataMenu[5].fecha.fecha.substring(8, 11) }}
                          </td>
                          <td>{{ dataMenu[5].plato6 }}</td>
                          <td>{{ dataMenu[5].precio6 }}</td>
                          <td *ngIf="dataMenu[5].tipo_plato6 === 1">
                            Ejecutivo
                          </td>
                          <td *ngIf="dataMenu[5].tipo_plato6 === 2">
                            Especial
                          </td>
                          <td *ngIf="dataMenu[5].tipo_plato6 === 3">General</td>
                        </tr>
                        <tr>
                          <td>
                            {{ dataMenu[6].fecha.fecha.substring(8, 11) }}
                          </td>
                          <td>{{ dataMenu[6].plato7 }}</td>
                          <td>{{ dataMenu[6].precio7 }}</td>
                          <td *ngIf="dataMenu[6].tipo_plato7 === 1">
                            Ejecutivo
                          </td>
                          <td *ngIf="dataMenu[6].tipo_plato7 === 2">
                            Especial
                          </td>
                          <td *ngIf="dataMenu[6].tipo_plato7 === 3">General</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>

    <div>
      <button
        (click)="stepper.reset()"
        mat-raised-button
        color="warn"
        matStepperPrevious
      >
        cancelar
      </button>
      <button
        class="siguiente"
        mat-raised-button
        color="primary"
        (click)="confirmar()"
      >
        Confirmar
      </button>
    </div>
  </mat-step>
</mat-horizontal-stepper>
